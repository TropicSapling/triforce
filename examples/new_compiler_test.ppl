box Array contains (_ Array)|Nothing

[(item) => Array {
	item
	Array {Nothing}
}

(Array {item Array {Nothing}}), (new_item) => Array {
	item
	Array {
		new_item
		Array {Nothing}
	}
}

] =>

box ByteThingy contains X|Y
box X contains Bit Bit Bit Bit Bit Bit Bit
box Y contains Bit Bit Bit Bit Bit Bit Bit

let arr = [
	ByteThingy {X {rand}},
	ByteThingy {Y {rand}}
];

(Array {item _})[0] => item
(Array {_ tail})[i] => tail[i - 1]

special print arr[0];
special print arr[rand between 0 and 1];

special print (ByteThingy bt) => if bt == X (
    println "X: " unwrap bt
) else (
    println "Y: " unwrap bt
)

--------------------------------------------------------------

box [b]               => (b =>)
box [b] contains [b2] => (b [b2] => b2)

box Zero
box PlusOne contains Nat n
box Nat contains Zero|(PlusOne n)

Zero                       =>
PlusOne [Nat n]            => Nat n
Nat     [Zero|(PlusOne n)] => Zero|(PlusOne n)

Zero                       [f] [x] => x
PlusOne [Nat n]            [f] [x] => f (n f x)
Nat     [Zero|(PlusOne n)] [f] [x] => (Zero f x) | (PlusOne n f x)

Nat Zero
Nat (PlusOne (Nat Zero))
Nat (PlusOne (Nat (PlusOne (Nat Zero)))) ([x] => x + "!") "hi"

PlusOne (Nat (PlusOne (Nat Zero))) f "hi"
f (PlusOne (Nat Zero) f "hi")
f (f (Zero f "hi"))
f (f "hi")
f ("hi" + "!")
("hi" + "!") + "!"
"hi!!"

Bool True => True
Bool False => False

True  [x] [_] => x
False [_] [y] => y

if [True] [body] => body
if [False] [_] =>
if [Bool b] [body] else [expr] => Bool b body expr

[a] == [a] => True
[_] == [_] => False

((Nat Zero) == (Nat Zero)) print "true" print "false" // "like C's 'b ? t : f'"

--------------------------------------------------------------

f $x
g $x $y $z

let [x, y, z] = [1, 2, 3];

take any func $f
take specific func (f)

take any args from any func ($g $x $y $z)
take any args from specific func (g $x $y $z)
take specific args from specific func (g x y z)

take any amount of args from specific func (g (Args $args))

Zero                            $f $x => x
PlusOne (Nat $n _ _)            $f $x => f (n f x)
Nat     (Zero|(PlusOne $n _ _)) $f $x => (Zero f x) | (PlusOne n f x)

--------------------------------------------------------------

while (False)     _              =>
while (Bool cond) (frozen $body) => (
	body;
	while cond body
)

(frozen $n)..(frozen $m) => n|(n + 1)|...|m

for (frozen $i) in ($start..$end) $body => (
	let i = start;
	while i < end body
)

$n % $m => (
	while n >= m (n -= m);
	n
)

for i in 1..100 (
	if i % 15 == 0 (
		print "FizzBuzz"
	) else if i % 3 == 0 (
		print "Fizz"
	) else print i
)

--------------------------------------------------------------

// "Prelude test or something"

(_); =>

Nothing $f $x =>

Bool True  $x _  => x
Bool False _  $y => y

True  => Bool True
False => Bool False

(True)          && (True)          => True
(Bool (Args _)) && (Bool (Args _)) => False

(False)         || (False)         => False
(Bool (Args _)) || (Bool (Args _)) => True

!(True) => False
!(False) => True

$a == $a => True
_  == _  => False
$a != $b => !(a == b)

Zero                     $f $x => x
PlusOne (Nat $n _ _)     $f $x => f (n f x)
Nat     (Zero)                 => Zero f x
Nat     (PlusOne $n _ _) $f $x => PlusOne n f x

if (True)    $body            => body
if (False)   _                =>
if (Bool (Args $b)) $body else $expr => b body expr

category of ($b (Args _)) => b
unbox       (_ (Args $b)) => b

$n mod $m => if n >= m (
	(n - m) mod m
) else n

$n..$m => n|(n + 1)|...|m

any ($b) => b (Args _)

// "Stuff below here doesn't really work"
// "Issues:"
// "- frozen $cond will not be a Bool because it hasn't been evaluated to that yet"
// "- 'continue' needs to somehow run not in this function but in the function using this"

if fulfilling (True)              $body => body
if fulfilling (frozen Bool $cond) _     => frozen (
	continue or alt prerun panic (format_err (format "Failed to fulfill condition '{}'" [stringify cond])); // "continue to next function def if there is one, else panic"
)

if fulfilling (True)  $body else report _             => body
if fulfilling (False) _     else report (String $msg) => frozen (
	continue or alt prerun panic (format_err (String msg));
)